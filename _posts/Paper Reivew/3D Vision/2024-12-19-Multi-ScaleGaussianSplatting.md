---
title: "[Paper Review] Multi-Scale 3D Gaussian Splatting"
date: 2024-12-19 20:02:43 +/-0000
categories: [Paper Review, 3D Vision]
tags: [AI, 3D]   
use_math: true  # TAG names should always be lowercase
typora-root-url: ../../../
---

> **Multi-Scale 3D Gaussian Splatting for Anti-Aliased Rendering**
>
> Zhiwen Yan, Weng Fei Low, Yu Chen, Gim Hee Lee
>
> CVPR 2024.
>
> [[Arxiv](https://arxiv.org/abs/2311.17089)] [[Project Page](https://jokeryan.github.io/projects/ms-gs/)] [[Github](https://github.com/JokerYan/MS-GS/tree/main)]

**픽셀 커버리지를 기반으로 한 다중 스케일 가우시안**



EWA 스플래팅의 두 가지 문제를 피하면서 3D 가우시안의 앨리어싱 아티팩트를 완화하기 위해, 우리는 각 개별 가우시안이 아닌 장면 수준에서 문제를 해결하는 다중 스케일 3D 가우시안을 도입합니다. 3D 장면은 $1\times$, $4\times$, $16\times$, 그리고 $64\times$ 다운샘플된 해상도에 해당하는 4개의 세부 수준으로 표현됩니다. 작고 세밀한 레벨의 가우시안들은 훈련 동안 큰 가우시안을 생성하기 위해 집계됩니다. 각 3D 가우시안 $\mathcal{G}_{k}^{l}$은 하나의 레벨 $l$에 속하며, 렌더링 시 그것의 “픽셀 커버리지”에 따라 독립적으로 포함되거나 제외됩니다.

**가우시안의 픽셀 커버리지**

![스크린샷 2024-12-15 오후 8.25.35](/assets/img/MSGS/스크린샷 2024-12-15 오후 8.25.35.png)

가우시안의 “픽셀 커버리지”는 화면 공간에 스플래팅되었을 때 가우시안의 크기가 현재 렌더링 해상도의 픽셀 크기와 비교하여 반영된 것을 나타냅니다. 스플래팅된 2D 가우시안 $\mathcal{G}_{(\mu^k, V^k)}$의 “픽셀 커버리지” $S_k$는 그것의 수평 또는 수직 축의 길이 중 작은 것으로, 낮은 불투명도 레벨 세트까지 측정되며, 이는 그림에서 보여집니다. 픽셀 커버리지는 픽셀 수로 측정되며, 불투명도 임계값 $\sigma_T$는 $\frac{1}{255}$로 설정됩니다.

**변수 설명:**

​	•	**$\mu^k_x, \mu^k_y$**: 가우시안의 중심 위치를 나타냅니다.

​	•	**$u, v$**: 각각 가우시안이 확장되는 수평 및 수직 방향의 반경입니다.

​	•	**$\sigma_T$**: 임계 불투명도 값입니다. 이 값은 가우시안의 경계를 정의하는 데 사용되며, 일반적으로 매우 낮은 값(예: $\frac{1}{255}$)으로 설정됩니다.

​	•	**$\sigma_k$**: 가우시안의 불투명도 값입니다.

​	•	**$G(\mu_k, v_k)$**: 중심이 $\mu_k$이고 공분산 행렬이 $v_k$인 2D 가우시안 함수입니다.



**식의 의미:**

​	•	**$\sigma_k G(\mu_k, v_k)(\mu_x^k + \frac{u}{2}, \mu_y^k) = \sigma_T$** 및 **$\sigma_k G(\mu_k, v_k)(\mu_x^k, \mu_y^k + \frac{v}{2}) = \sigma_T$**:

​	•	이 부분은 가우시안 함수에서 $u$와 $v$ 방향으로 $\frac{u}{2}$, $\frac{v}{2}$만큼 이동했을 때 불투명도 값이 $\sigma_T$에 도달하는 지점을 찾는 것입니다. 이를 통해 가우시안이 화면 상에서 얼마나 넓게 퍼져 있는지를 수치적으로 측정할 수 있습니다.



픽셀 커버리지는 공간 도메인에서 2D 스플래팅된 가우시안의 범위를 근사합니다. 주어진 카메라 방향에서 렌더링할 때, 각 스플래팅된 가우시안의 색상은 이 픽셀 커버리지 내에서 일정합니다. 결과적으로, 이 픽셀의 커버리지는 이 지역에서 가장 높은 주파수 성분 $f_{max}=1/S_k$의 역수를 근사합니다. 래스터화하는 동안의 샘플링 주파수 $f_s = \frac{1}{\mathrm{px}}$와 비교했을 때, 신호 주파수 $f_{max} > f_s/2$는 샘플링이 앨리어싱을 피하기 위해 필요한 Nyquist 주파수 이하로 떨어지게 할 수 있습니다.

따라서 픽셀 커버리지 $S_k < S_T = 2\mathrm{px}$인 가우시안은 렌더링 중에 필터링되어야 앨리어싱을 피할 수 있습니다. 3D 가우시안 표현은 다른 주파수의 신호를 다른 가우시안에 인코딩하지 않기 때문에, 작은 가우시안을 단순히 필터링하는 것은 장면에서 구멍이나 누락된 부분을 초래할 수 있습니다. 

![스크린샷 2024-12-15 오후 8.32.21](/assets/img/MSGS/스크린샷 2024-12-15 오후 8.32.21.png)

이 문제를 해결하기 위해, 우리는 작은 가우시안을 집계하여 저주파 신호를 인코딩하는 큰 가우시안을 형성할 것을 제안합니다. 이 큰 가우시안들은 작은 가우시안들이 필터링될 때 나타날 것입니다.



**큰 가우시안 삽입을 위한 집계**

![스크린샷 2024-12-15 오후 8.31.20](/assets/img/MSGS/스크린샷 2024-12-15 오후 8.31.20.png)

훈련 시작 시 입력 포인트 클라우드에서 초기화된 모든 3D 가우시안들은 가장 세밀한 레벨 $l=1$에 속합니다. 그들은 Kerbl3Dgaussians에서와 같이 분할 및 복제를 통해 밀집화되며, 밀집화된 모든 가우시안들은 동일한 레벨을 상속받습니다. 처음 1,000회의 반복의 워밍업 단계 후에, 우리는 너무 작은 세밀 레벨의 가우시안을 집계하여 조잡한 레벨의 가우시안을 도입합니다. 이 과정은 아래와 같이 개요되어 있습니다:

![스크린샷 2024-12-15 오후 8.30.30](/assets/img/MSGS/스크린샷 2024-12-15 오후 8.30.30.png)

​	1.	모든 레벨 ${l_m \mid 2 \le l_m \le l_{max}}$에 대해, 우리는 모든 훈련 이미지의 $4^{l_m-1}$ 배 다운샘플된 해상도에서 $[1,l_m-1]$의 모든 3D 가우시안을 렌더링합니다. 필터 임계값 $S_T$보다 최소 “픽셀 커버리지” $S_k$가 작은 모든 3D 가우시안은 집계를 위해 선택됩니다.

​	2.	선택된 3D 가우시안은 그들의 위치에 기반하여 $(400/l_m)^3$ 해상도의 복셀 그리드에 의해 구획됩니다. 각 복셀 내의 모든 가우시안의 속성은 포지션, 스케일링, 불투명도, 색상을 포함하여 새로운 가우시안을 생성하기 위해 평균 풀링을 사용하여 집계됩니다. 자세한 내용은 부록에 포함되어 있습니다.

​	3.	각 복셀 내 가우시안의 평균 “픽셀 커버리지” $S_{avg}$에 기반하여 생성된 각 새로운 가우시안의 스케일링은 $S_T/S_{avg}$ 만큼 확대되어 $l_m$에서 렌더링하기에 적합한 크기가 됩니다. 이 새로운 가우시안은 레벨 $l_m$에 속합니다.

위의 절차는 세밀한 레벨의 가우시안들을 조잡한 레벨로 재구성하여, 작은 가우시안들이 생성하는 문제를 방지하고, 렌더링 과정에서 더 큰 가우시안들이 필요한 곳에 효율적으로 대응할 수 있도록 합니다. 이 접근 방식은 장면의 다양한 해상도에서의 세밀한 조절을 가능하게 하며, 더 큰 가우시안들을 적절하게 활용하여 전체적인 장면의 질을 향상시키는 데 기여합니다.



**다중 스케일 훈련 및 선택적 렌더링**



큰 가우시안이 추가된 후, 모델은 원본 이미지와 다운샘플된 이미지 모두를 사용하여 훈련됩니다. 각 가우시안의 최대 픽셀 커버리지 $S_k^{max}$와 최소 픽셀 커버리지 $S_k^{min}$는 선택적 렌더링을 위해 저장됩니다. 렌더링 다운샘플 스케일이 가우시안 $\mathcal{G}_k$이 생성될 때의 다운샘플 스케일과 같다면, 그것의 $S_k^{max}$와 $S_k^{min}$ 값은 새로운 픽셀 커버리지 $S_k$로 업데이트됩니다:


$$
\begin{aligned}

S_k^{max} &= \max(\lambda_1 S_k^{max}, S_k), \\

S_k^{min} &= \min(\lambda_2 S_k^{min}, S_k),

\end{aligned}
$$


여기서 $\lambda_1$과 $\lambda_2$는 각각 $0.95$와 $1.05$의 경험적 값인 감쇠 계수입니다.



렌더링은 어떤 해상도나 카메라 거리에서도 진행될 수 있으며, 가우시안은 화면상에서의 픽셀 커버리지 $S_k$가 다음 조건을 만족할 때 렌더링을 위해 선택됩니다:
$$
\left(\frac{S_k}{S_k^{max}} \leq S_{rel}^{max}\right) \land \left(\frac{S_k}{S_k^{min}} \geq S_{rel}^{min} \lor S_k \geq S_T\right),
$$


여기서 $S_{rel}^{max}$와 $S_{rel}^{min}$은 각각 최대 및 최소 상대 픽셀 커버리지로, $1.5$와 $0.5$의 경험적 값입니다. 가우시안의 픽셀 커버리지가 $S_k^{max}$보다 훨씬 크면 렌더링에서 필터링됩니다. 마찬가지로, 그것이 $S_k^{min}$보다 훨씬 작고 $S_T$보다 작으면 렌더링에서 필터링됩니다. 

![스크린샷 2024-12-15 오후 8.36.34](/assets/img/MSGS/스크린샷 2024-12-15 오후 8.36.34.png)

절대 $S_T$ 임계값은 화면 크기가 충분히 작지 않으면 앨리어싱 문제를 일으키지 않는 하위 스케일의 큰 가우시안을 보존하는 데 사용됩니다. (아래 알고리즘 2)

![스크린샷 2024-12-15 오후 8.30.04](/assets/img/MSGS/스크린샷 2024-12-15 오후 8.30.04.png)

가장 높은 해상도에서 최대 훈련 해상도를 초과하고 최소 훈련 해상도 아래에서 렌더링하는 경우, 가장 세밀한 레벨의 가우시안들이 너무 크거나 가장 조잡한 레벨의 가우시안들이 너무 작더라도 필터링되지 않습니다.



각 가우시안의 픽셀 커버리지 범위는 모델이 다양한 세부 수준의 다중 스케일 가우시안을 유지할 수 있게 합니다. 다양한 해상도와 거리에서 렌더링을 위한 적절한 가우시안 하위 집합이 선택됩니다. 고해상도에서는 고주파 정보를 인코딩하는 더 많은 작은 가우시안이 렌더링되고, 저해상도에서는 앨리어싱 효과를 줄이고 속도를 높이기 위해 저주파 정보를 인코딩하는 더 적고 큰 가우시안이 렌더링됩니다.